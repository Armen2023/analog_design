---
title: "ԱՆԱԼՈԳԱՅԻՆ ԻՆՏԵԳՐԱԼ ՍԽԵՄԱՆԵՐԻ ՆԱԽԱԳԾՈՒՄ։"
author: '**Հեղինակներ՝** Մարիամ Հակոբյան, Նարինե Գալստյան, Երանուհի Զուլալյան, Արմեն
  Համբարյան, Վարդան Անատոմյան։ <br /> **Ղեկավարներ՝** Մերի Մարգարյան, Արթուր Բայբուրդյան։'
date: "`r Sys.Date()`"
output:
  word_document: default
  pdf_document: default
documentclass: book
bibliography:
- book.bib
- packages.bib
link-citations: yes
github-repo: "rstudio/bookdown-demo"
site: bookdown::bookdown_site
editor_options: 
  markdown: 
    wrap: 72
---

```{r setup, include=FALSE}
library(plotly)
library(ggplot2)
library(reticulate)
use_python("/usr/bin/python3")
```

```{python}
import numpy as np
import matplotlib.pyplot as plt
```

# ՆԵՐԱԾՈՒԹՅՈՒՆ։

Նախքան **օպեռացիոն ուժեղարարների** բնութագրիչ մեծությունների,
կառուցվածքի, նախագծման փուլերի, դրանց առանձնահատկությունների մասին
խոսելը ներածական մասը կնվիրենք դաշտային տռանզիստորների կառուցվածքի,
աշխատանքային ռեժիմների Վոլտ֊Ամպեռային **«ՎԱԲ»** բնութագրի համառոտ
ներկայացմամը։

## ՄՕԿ Մետաղ օքսիդ կիսահաղորդիչ տռանզիստորներ։

```{r, echo=FALSE, out.width='100%', fig.align='center', fig.cap='...'}
knitr::include_graphics("imige/mostex.jpg")
```

Նկարում պատկերված են **ՆՄՕԿ** և **ՊՄՈԿ** տրանզիստորների պարզեցված
կառուցվածքը։ Ինչպես երևում է նկարից սարքերը սիմետրիկ էն փականի նկատմամբ,
որը պատճառներից մեկն է լայնամաշտաբ կիռառման, քանի որ հեշտացնում է
արտադրական պռոցեսները իտարբերություն երկբևեռ տրանզիստորների։ Ինտեգրալ
սխեմաներ պատրաստելուց վերցնում են P տիպի կիսահաղորդիչ հարթակ
«substrate»: ՊՄՕԿ տռանզիստորներ ստանալու համար տարբեր եղանակներով
հարթակի մեջ ներդնում են N տիպի իմպլանտ։

Աշխատանքի սկզբունքը ուսունմասիրելու համար դիտարկենք ՆՄՕԿ տրանզիստորը։
տրանզիստորի աշխատանքի համար իրականում անհրաժեշտ է ևս մեկ ելուս որպիսի
հարթակին պոտենցիալ հաղորդի։ Հարթակից ակունք և ըմբիչ հոսանք չանցնելու
համար պետկ է հարթակը ունենա ավելի ցածր պոտենցիալ։ Պարզության համար
ենթադրենք հարթակը և ակունքը միացված են իրար։ Ինչպես երևում է նկարից
փականը և հարթակը առանձնացված են օքսիդով այս կառուցվածքը իրենից
ներկայացնում կոնդեսատոր։

## Շեմային «treshold» լարում։

```{r, echo=FALSE, out.width='100%', fig.align='center', fig.cap='...'}
knitr::include_graphics("imige/th.png")
```

Դիտարկենք նկարում պատկերված արտաքին լարումներին միացված ՆՄՈԿ֊ը։ Երբ
փականի պոտենցիալը հարթակի նկատմամբ մեծանում է $\pmb{\varphi>0}$ հարթակի
ազատ լիցքակիրները խոռոչները սկսում են վանվել ներքև թողնելով բացասական
իոններ ստեղծվում է աղքատացված տիրույթ։ Այսպիսով որքան մեծանա
$\pmb{\varphi}$֊ն այնքան ավելի կհաստանա աղքատացման տիրույթը հետևաբար
խոռոչների կոնցենտրացիան հարթակի ներքևում ավելի կմեծանա։
$\pmb{\varphi}$֊ի բավարար մեծ արժեքի դեպքում օքսիդի տակ սկսում է իհայտ
գալ ազատ էլեկտրոններ որոնց մի մասը ակունքիցից են հոսել իսկ մի մասը
հարթակից։ Այսպիսով ակունքի և ըմբիչի միջև առաջանում է հոսքուղի։ այս
երևույթը հաճախ անվանում են նաև կիսահաղորդչի տիպի շրջում։

$V_{gs}$֊ի այն մինիմալ լարումը որի դեպքում առաջանում է հոսքուղի «տեղի է
ունենում ինվերսիա» կոչվում է շեմային լարում:

```{=tex}
\begin{equation} 
  V_{TH} = 𝜱_{MS} + 2 𝜱_F + \frac{Q_{dep}}{C_ox}
  (\#eq:1)
\end{equation}
```
Որտեղ՝

-   $𝜱_{MS}$֊ը հարթակի և փականի աշխատանքային ֆունկցիաների տարբերությունն
    է։
-   $𝜱_F = \frac{kT}{q} \ln{\frac{N_{sub}}{n_i}}$
    -   $k$֊ն Բելցմանի հաստատուն։
    -   $N_{sub}$֊ը հարթակի լիցքակիրների կոնցետրացիան **«doping
        density»**:
    -   $n_i$֊ը մաքուր կիսահաղորդիչ հարթակի լիցքակիրների կոնցետրացիան
        **«udoping density»**:
-   $C_{ox}$֊ը միաոր մակերես ունեցող հաթակ օքսիդ ըմբիչ կոնդեսատորի
    ունակությունն է։
-   $Q_dep$֊ը աղքատացման տիրույթի իոնների լիցքն է։

Ներկայումս երբ տրանզիստորների չափերը համենատելի են ատոմի չափերին շատ
դժվար է տալ բանաձև ոչ միայն շեմային լարման այլ նաև ՎԱԲ֊ի և այլ
բնութագրերի համար, այդ պատճառով պարամետրերը հաճախ **գնահատում** են
օգտվելով վիճակագրական մեթոդներից։

## Վոլտ֊Ամպեռային բնութագիրը։

ՄՈԿ տրանզիստորի վոլտ֊Ամպեռային բնութագրի մասին խոսելիս կուզենաինք նշել
որ, երբ փականի պոտենցիալը գերազանցում է շեմային լարումը ըմբիչով կարող է
հոսանք անցնել նշանակում է՝ տրանզիստորը բաց է սակայն փականով հոսանք չի
անցնում։

Դիտարկենք նկարում պատկերված արտաքին լարումներին միացված երկու դեպքերը։

```{r, echo=FALSE, out.width='100%', fig.align='center', fig.cap='...'}
knitr::include_graphics("imige/va.png")
```

::: {.blackbox data-latex=""}
::: {.lf data-latex=""}
::: {.center data-latex=""}
Երբ ակունքի և ըմբիչի պոտենցիալները իրար հավասար են՝ \begin{align}  
  Q_d = WC_{ox}(V_{GS} - V_{TH})
\end{align}
:::
:::

::: {.rig data-latex=""}
::: {.center data-latex=""}
Երբ $V_{DS>0}$ հոսքուղու որևէ X կետում՝

```{=tex}
\begin{align} 
  Q_d = WC_{ox}(V_{GS} - V_{TH})
\end{align}
```
:::
:::
:::

Այժմ ենթադրենք ունենք N տիպի բավական երկար կիսահաղորդիչ որը տեղադրված է
համասեռ մեկ միաոր էլ․ դաշտում։ Ակնհայտ լիցքակիրները կսկսեն արագանալ
սակայն տեղի են ունենում բախումներ այդ պատճառուվ որոշները կանգ կառնեն և
նորից կսկսեն արագանալ որոշները կարող է ընդհանրապես հանդիպեն խոռոչի և
զբաղեցնեն ազատ տեղը։ Այսպիսով որպիսի կարողանանք բնութագրենք շարժումը
ներմուծենք լիցքի շարժողականություն մեծությունը, որը միջինացված արժեք է և
ցուից է տալիս թե միջինում ինչ արագությամբ է շարժվում լիցքակիրը արտաքին
էլ․ դաշտի ազդեցության տակ $μ_n = \frac{V}{E}$։

Երբ հայտնի է ազատ լիցքակիրների բաշխվածությունը օգտվելով էլ․ հոսանքի
սահմանումից կստանանք՝

```{=tex}
\begin{equation} 
  I_{D} = μ_n C_{ox} \frac{W}{L}[(V_{GS} - V_{TH})V_{DS} - \frac{1}{2}V_{DS}^2]
  (\#eq:2)
\end{equation}
```
Ստացված $(1.2)$ Արտահայտությունը ըստ $V_{DS}$֊ի մեկ մեծագույն ունեցող
քառակուսի հավասարում է, որը իր առավելագույն արժեքը ընդունում է
$V_{DS} = V_{GS} - V_{TH}$ իսկ առավելագույն հոսանքը կլինի՝

```{=tex}
\begin{equation} 
  I_{D, max} = \frac{1}{2} μ_n C_{ox} \frac{W}{L} (V_{GS} - V_{TH})^2
  (\#eq:3)
\end{equation}
```
<!-- Երբ $V_{DS} \ll V_{GS} - V_{TH}$ $(1.3)$֊ը կարող ենք մոտարկել՝ -->

```{=tex}
\begin{equation} 
  I_{D}  ≈ \frac{1}{2} μ_n C_{ox} \frac{W}{L} (V_{GS} - V_{TH}) V_{DS}
  (\#eq:4)
\end{equation}
```
Այժմ պարզենք թե ինչ է տեղի ունենում երբ $V_{DS} > V_{GS} - V_{TH}$:

```{r, echo=FALSE, out.width='100%', fig.align='center', fig.cap='...'}
knitr::include_graphics("imige/pinchoff.png")
```

Նկ․ 1.4 ում պատկերված հոսքուղում լիցքերի բաշխվածությունը ինչպես տեսնում
ենք երբ $V_{DS} > V_{GS} - V_{TH}$ հոսքուղու որևէ $X$ կետից սկսած այլևս
փականի պոտենցիալը բավարար չի հարթակում ինվերսիա առաջացնելու համար
արդյունքում հոսքուղին կտռվում է։ ըմբիչով անցնող հոսանքը չի հետևում
պարաբոլին։ Քանի որ լիցքերը բավական արագացած կլինեն կտռման կետում դրանց
մի մասը հասնում է ըմբիչ։ Այս երևույթը կոչվում է թունելային անցում։
1.2֊ը՝ Ստացվել է հոսքուղու ամբողջ երկարությամբ Ինտեգրման արցյունքում
ուստի անհրաժեշտ է ինտեգրել մինչև այն $X$ կետը որտեղ հոսքուղին ընհատվում
է։

```{=tex}
\begin{equation} 
  I_{D}  = \frac{1}{2} μ_n C_{ox} \frac{W}{L'} (V_{GS} - V_{TH})^2
  (\#eq:5)
\end{equation}
```
1.5 արտահայտության մեջ $L'$֊ը հաճախ փոխարինում ենք $L$֊ով։ երբ
$V_{DS} > V_{GS} - V_{TH}$ անվանում են տրանզիստորի հագեցման ռեժիմ։ Այս
ռեժիմում $I_D$ ֊ը կախված չէ $V_{DS}$֊ց։

Բոլոր հետևությունները վերաբերվում է նաև ՊՄՕԿ տրանզիստորներին միայն պետք
է հիշել որ փականի պոտենցիալը պետք է ավելի փոքր լինի քան ակունքի
պոտենցիալը հետևաբար ՎԱԲ֊ի միջ պետք է ավելացնել $-$ նշանը։

### Հոսքուղու մոդուլացիա։

Իրականում $I_D$֊ը հագեցման ռեժիմում $V_{DG}$֊ից կախված գծային մեծանում է

### Body էֆեքտ։

վերևում մենք ենթադրել էինք որ հարթակը և ակունքը իրար են միացված և ունեն
նույն պոտենցիալը։ Նկ․ պատկերված է ՆՄՈԿ որի հարթակը միացված է ավելի ցածր
պոտենցիալի։

```{r, echo=FALSE, out.width='100%', fig.align='center', fig.cap='...'}
knitr::include_graphics("imige/body.png")
```

Քանի որ աղքատացման տիրույթը ստեղծում է փական հարթակ պոտենցիալների
տարբերության հետևանքով՝ ուստի երբ հարթակի պոտենցիալը ավելի փոքր է
աղքատացման տիրույթը պետք է ավելի լայն լինի ինչպես պատկերված է նկարում։
Այսպիսով փականի նույն պոտենցիալի դեպքում ավելի շատ բացասական իոններ
կլինեն օքսիդի տակ 1.1֊ ում՝ $V_{TH}$֊ը ֆունկցիա է աղքատացման տիրույթի
լիցքից նշանակում է շեմային լարումը պետք է մեծանա։ Այս ֆենոմենը կոչվում է
մարմնի «Body» էֆեքտ։

```{=tex}
\begin{equation} 
  V_{TH} = V_{TH0} + \pmb{\gamma} (\sqrt{2𝜱_{F} + V_{SB}} + \sqrt{|2𝜱_{S}|})
  (\#eq:6)
\end{equation}
```
Որտեղ՝

-   $V_{TH0}$֊ն այն շեմաին լարումն է երբ հարթակը և փականը իրաի են
    միացված։
-   $V_{BS}$֊ը հարթակ փական լարումն է։
-   $\pmb{\gamma} = \frac{\sqrt{2 q \epsilon_{si} N_{sub}}}{C_{ox}}$:

## ՄՕԿ փոխանցման գործակից «Transconductance»:

Հագեցման ռեժիմում ինչպես ցույց է տրված 1.5֊ում ըմբիչի հոսանքը կախված է
ըմբիչ ակունք պոտենցիալների տարբերությունից։ ՄՈԿ֊ը իրեն դրսևորում է
ինչպես հոսանքի աղբյուր։ Որպես փոխանցման գործակից սահմանենք ազդեցության
$V_{GS}$ փոփոխության հետևանքով արձագանքի $I_D$ փոփոխությունը երբ
$V_{DS} = Constant$

```{=tex}
\begin{equation} 
  g_m = \frac{\partial I_D}{\partial V_{GS}} =  μ_n C_{ox} \frac{W}{L} (V_{GS} - V_{TH})
  (\#eq:7)
\end{equation}
```
```{r, echo=FALSE, out.width='100%', fig.align='center', fig.cap='...'}
knitr::include_graphics("imige/gm.png")
```

Նկարում պատկերված է փոխանցման գործակցի կախվածությունը պարամետրերից։

## ՄՕԿ փոքր ազդանշան «Small-Signal» մոդել:

Ինչպես հայտնի է կիսահաղորդչային սարքերը ոչ գծային տարեր են։ Այն Շղթաները
որոնք պարունակում են ոչ գծային տարեր հաշվարկները հիմնականում մոտաոր են։
ՎԱԲ֊ի համար ստացված (1.2) , (1.5) արտահայտությունը շատ կարևոր են
շղթաների նախագծման հետազոտման համար: Իրականում կան ՎԱԲ֊ի այլ
արտահայտություններ որտեղ՝ օրինակ հաշվի է առնված այն, որ ակունքը, հարթակը
և ըմբիչը կազմում են երկբևեռ տրանզիստոր։ Սակայն հարց է առաջանում թե որքան
է դա կարևոր շղթաի աշխատանքի համար։ Կախված ազդանշանի փոփոխման չափից
հաշվարկների պարզեցման համար ՄՈԿ֊ի իրական ՎԱԲ֊ի փոխարեն օգտվում ենք ՄՕԿ֊ի
փոքր ազդանշան մոդելից՝ ըստ որի ազդեցության փոքր փոփոխություն պատճառով
արձագանքի փոփոխության միջև կապը գծային է։

Փոքր ազդանշան մոդելը կառուցվում է ենթադրելով որ տրանզիստորը գտնվում է
հագեցման ռեժիմում ուստի շատ կարևոր է հաշվարկների արձյունքները ստանալուց
հետո հետ վերադառնալ և ստուգել հագեցման պայմանը։ Ազդանշանը ներկայացվում է
երկու լարումների գումար։ Առաջիմը ազդանշանի հաստատուն մասն է «$V_b$» այն
ընտրում է տրանզիստորի աշխատանքային կետը։ Երկրորդ փոփոխական մասն է
«ենթադրվում է ունի փոքր ամպլիտուդ»։ Դիտարկենք կամայական «առանց ռեակտիվ
տարերի» ակունք ըմբիչ պարունակող ճուղ։ Դիցուկ ճուղի ծայրերին
պոտենցիալների տարբերությունը $U$֊է իսկ փականի լարումը $V_b = Const$: Եթե
տրանզիստորը գտնվում է հագեցման ռեժիմում ճուղով կանցնի $I_{Db}$ հոսանք,
որը կախված չէ $U$֊ց։ Նշանակում է ճուղին համարժեք է $U = 0$ և ակունք
ըմբիչի փոխարեն $I_{Db}$ մեծությամբ հասանքի աղբյուրով ճուղ։ Այժմ
վերադրենք ազդանշանի փոքր փոփոխությունը։ ՈՒնենք տրանզիստոր որի $g_{mb}$֊ն
$(V_{GS} = V_b , I_{Db})$ կետում ՎԱԲ֊ին տարված շոշափողնի և $V_{GS}$
առանցքի կազմած անկյան տանգեսն է։ Մոդելում ՎԱԲ֊ը ապրոքսիմացվում է
շոշափողնին ինչպես պատկերված է նկարում։

```{python echo=FALSE}
x = np.array([0 , 0.8])
x_sat = np.linspace(0.8, 3, 100)
y_sat = 0.01 + (x_sat - 0.8)**2
y = np.array([0.01, 0.01])
x=np.append(x, x_sat)
y=np.append(y, y_sat)
omegat = np.linspace(-2*np.pi , 2*np.pi , 100)
signal = 0.3 * np.sin(omegat)
gm = 2*1.7
col = np.linspace(0, 2, 100)

fig, ax = plt.subplots(layout='constrained')
ax.plot(x, y, 'r', label='ՎԱԲ')
ax.plot(col,  0.01 + (signal + 1.7)**2 , 'b', label='$I_D$ Հոսանքը առանց հոսքուղու մոդուլացիաի։')
ax.plot(col,  0.01 + 1.7**2 + signal*gm , color='orange', label= '$I_D$ Հոսանքը ըստ մոդելի։')

ax.scatter(x =2.5, y= 0.01 + 1.7**2, color = 'r' )
ax.plot([2.5,2.5], [0, 0.01 + 1.7**2], linestyle="dotted", color = 'c')
ax.plot([0, 2.5], [0.01 + 1.7**2, 0.01 + 1.7**2],  linestyle="dotted", color = 'c')

ax.plot(2.5 + signal, col)
ax.plot([2,3] , [2*gm + 0.01+1.7**2-2.5*3.4 , 3*gm + 0.01+1.7**2-2.5*3.4],linewidth=0.7, color = 'g')

ax.set_title("Փոքր ազդանշանի մեդելը։")
ax.set_xlabel("$V_{GS}$  Լարումը։")
ax.set_ylabel("Ըմբիչով անցնող հեսանքը։")
ax.legend( fontsize=8)
ax.grid()
for tick in ax.xaxis.get_major_ticks():
    tick.tick1line.set_visible(False)
    tick.label1.set_visible(False)
for tick in ax.yaxis.get_major_ticks():
    tick.tick1line.set_visible(False)
    tick.label1.set_visible(False)
plt.show()
```

Հաճախ կարիք է առաջանում բարդացնել մոդելը խնդրի պայմանից ելնելով և
ընդգրկել նաև հոսքուղու մոդուլացիան։

```{r, echo=FALSE, out.width='100%', fig.align='center', fig.cap='...'}
knitr::include_graphics("imige/smolsignal.png")
```

Նկարում պատկերված են երկու փոքր ազդանշան մոդելներ։ (b)֊ում հաշվի է
առնված հոսքուղու մոդուլացիան որտեղ՝

```{=tex}
\begin{equation} 
  r_0 = \frac{\partial V_{DS}}{\partial I_D} ≈ \frac{1}{λ I_D}
  (\#eq:8)
\end{equation}
```
## ՄՕԿ «Spice» մոդել:

«Spice»-ը ծրագրային ապահովում է որի առաջին տարբերակը թողարկվել է 1973
թվականին։ «Spice»-ը թույլ է տալիս կառուցել սխեմաի մաթեմատիկական մոդելներ
կատարել տարբեր տեսակի հետազոտություններ։ Որպիսի հաշվիչ սարքը կարողանա
կառուցել սխեմաի մոդելը անհրաժեշտ է տալ տարերը դրանց միացումը ընդ որում
ամեն տարի համար գոյություն ունի միացումների սահմանված հերթականություն
ինչպես նաև այդ տարերի մաթեմատիկական մոդելները «lib»։ «Spice» ում ՄՈԿ֊ը
մոդելաորվում է\`

-   VTO Շեմաին լարումը երբ $V_{SB} = 0$
-   $GAMMA$ «body-effect» գործակից։
-   PHI $2𝜱_{F}$։
-   TOX օքսիդիք հաստությունը։
-   NSUB Հարթակի «դոպինգաորման» կոնցենտրացիան։
-   UO Հոսքուղու շարժողականությունը։
-   LAMBDA Հոսքուղու մոդուլացիաի գործակից։
-   CJ ակունք ըմբիչ կոնդեսատորի ունակությունը միաոր մակերեսի համար։
-   ...

```{r, echo=FALSE, out.width='100%', fig.align='center', fig.cap='...'}
knitr::include_graphics("imige/spmodel.gif")
```

Կան պարամետրեր որոնք կարելի է փոփոխել ինտեգրալ սխեման նախագծելիս՝
հոսքուղու երկարությունը, լայնությունը, ...։

Այս աշխատանքում որպես մոդելաորման միջոց օգտագործվել է
[NgSpice](https://ngspice.sourceforge.io/), իսկ որպես գրադարան՝ «Google»
և «SkyWater» ընկերությունների համատեղ թողարկած
[130նմ](https://skywater-pdk.readthedocs.io/en/main/versioning.html#current-status)
գրադարանից: Նշված ծրագրային ապահովումները թողարկվել են ուսումնական
նպատակներով և դրանց ճշտությունը բավարար չէ կոնվերցիոն նպատակներով
օգտագործվել համար։

Տռանզիստորներ ՎԱԲ֊ի հետազոտման համար մոդելաորենք նկարում պատկերված
սխեման։

::: {.cols data-latex=""}
::: {.col data-latex="{0.6\\textwidth}"}
```{r, echo=FALSE, out.width='200%', fig.align='center', fig.cap='...'}
knitr::include_graphics("imige/vgsd.png")
```
:::

::: {.col data-latex="{0.05\\textwidth}"}
  <!-- an empty Div (with a white space), serving as
a column separator -->
:::

::: {.col data-latex="{0.4\\textwidth}"}
Շղթաի Spice նկարագրությունը։

`xm1 dr GND  GND  nfet01v8_lvt w=1 l=0.5` <br />
`vds dr GND  dc=1.8` <br /> 
`vgs ge GND  dc=1.8` <br />
:::
:::

Spice նկարագրությունը անհրաժեշտ է ավելացնել հետազոտության տեսակը։
Նկարված սխեմաի համար կատարվել է մի քանի հետազոտություն։ Միտքը կայանում է
նրանում որ ֆիքսենք մի լարումը և փոփոխենք միուսը։ Այդպիսի հետազոտության
համար լավագույն տարբերակը «DC» հետազոտությունն է, որի դեպքում ենթադրվում
է նշված մեծության փոփոխվելու ժամանակ շղթայում անցումային պրոցեսները
ավարտվել է։

`dc vds 0 1.8 0.01  vds 0.2 1.8 0.5`

-   $V_{GS}$ լարումը փոփոխվի (0 , 1.8) միջակայքում 0.01 քայլով։
-   $V_{DS}$ լարումը փոփոխվի (0.2 , 1.8) միջակայքում 0.5 քայլով։

```{r  echo=FALSE, fig.cap='...', out.width='100%', fig.align='center'}
df <- read.csv('./sp_data/vgs.csv')
fig1 <- plot_ly(df, x = ~Vgs, y = ~Idr18, name = 'Vd = 1.8(Վ)', type = 'scatter', mode = 'lines') 
fig1 <- fig1 %>% add_trace(y = ~Idr05, name ='Vd= 0.5(Վ)', mode = 'lines') 
fig1 <- fig1 %>% add_trace(y  = ~Idr02, name = 'Vd = 0.2(Վ)', mode = 'lines')
fig1<- fig1 %>%layout(legend = list(x = 1, y = 0.5))
fig1<- fig1 %>%layout(xaxis = list(range = c(0.4, 1.8)))

df <- read.csv('./sp_data/vds.csv')
fig2 <- plot_ly(df, x = ~Vds, y = ~Idr18, name = 'Vg = 1.8(Վ)', type = 'scatter', mode = 'lines') 
fig2 <- fig2 %>% add_trace(y = ~Idr14, name = 'Vg = 1.4(Վ)', mode = 'lines') 
fig2 <- fig2 %>% add_trace(y  = ~Idr10, name = 'Vg = 1(Վ)', mode = 'lines')
fig2<- fig2 %>%layout(legend = list(x = 1, y = 0.5))

fig <- subplot(fig1, fig2,nrows = 2, titleY = FALSE, titleX = FALSE, margin = 0.05)
fig <- fig %>%layout( 
         yaxis = list( 
          title = 'ԸՄԲԻՉՈՎ ԱՆՑՆՈՂ ՀՈՍԱՆՔԸ։'))

annotations = list( 
  list( 
    x = 0.5,  
    y = 1,  
    text = "ՓԱԿԱՆ ԱԿՈՒՆՔ ԼԱՐՈՒՄԸ:",  
    xref = "paper",  
    yref = "paper",  
    xanchor = "center",  
    yanchor = "bottom",  
    showarrow = FALSE 
  ),  
  list( 
    x = 0.5,  
    y = 0.45,  
    text = "ԸՄԲԻՉ ԱԿՈՒՆՔ ԼԱՐՈՒՄԸ:",  
    xref = "paper",  
    yref = "paper",  
    xanchor = "center",  
    yanchor = "bottom",  
    showarrow = FALSE 
  ))
fig <- fig %>%layout(annotations = annotations) 
fig

```

```{r include=FALSE}
# automatically create a bib database for R packages
knitr::write_bib(c(
  .packages(), 'bookdown', 'knitr', 'rmarkdown'
), 'packages.bib')
```
