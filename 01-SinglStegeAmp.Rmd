
```{r setup, include=FALSE}
library(plotly)
library(ggplot2)
library(reticulate)
```


# Մեկ տրանզիստորով «Single-Stage» ուժեղարարներ։

ՈՒժեղացումը էական ֆունկցիան է անալոգային (և շատ թվային) սխեմաներում։ 
ազդանշանի մակարդակը կարող է շատ փոքր լինել բեռին միացնելու համար։ հնարաոր է նաև ունենա 
բարձր թվային արժեք սակայն ելքային մեծ դիմադրության պատճառով կրկին չկարողանա բեռի վրա 
թողնել անհրաժեշտ ազդացությունը։ ՈՒժեղարարների ուսումնասիրումը կսկսենք պարզագույն 
**ընդհանուր ակունքով** ուժեղարարներից։

## Ընդհանուր ակունքով ուժեղարար։

```{r, echo=FALSE, out.width='30%', fig.align='center', fig.cap='...'}
knitr::include_graphics("imige/cs.png")
```


ՄՕԿ տրանզիստորի և ռեզիստորի նկ (2.1) պատկերված կոմբինացիան հանդսանում է ընդհանուր ակունքով 
«Common-Source» ուժեղարարար։ ՄՕԿ֊ի ՎԱԲ֊ից հայտնի է որ փականի պոտենցիալի փոփոխությունը 
բերում է ըմբիչով անցնող հոսանքի փոփոխության։ Ըմբիչով անցնող Հոսանքը ընդհանուր է և նույն 
հոսանքը անցնում է նաև դիմադրությունով **«բեռի բացակայության դեպքում»** որը ելքում ստեղծում է 
պոտենցիալ: Երբ մուտքի լարումը $V_{in} < V_{TH}$   $M_1$ տրանզիստորը փակ կլինի նշանակում է շղթայով 
հոսանք չի անցնի հետևաբար $V_{out} = V_{DD}$: $V_{in}> V_{TH}$ այն արժեքների համար 
երբ $V_{out}>V_{in} - V_{TH}$ ՄՕԿ֊ը հագեցման ռեժիմում է հետևաբար՝ 



```{=tex}
\begin{equation} 
  V_{out}  = V_{DD} - R_{D} \frac{1}{2} μ_n C_{ox} \frac{W}{L} (V_{in} - V_{TH})^2
  (\#eq:1)
\end{equation}
```
(2.1)֊ում հաշվի առնված չէ հոսքուղու մոդուլացիան։ Մուտքային լարման հետագա մեծացումը կբերի նրան որ 
 $V_{out} < V_{in} - V_{TH}$ և ՄՕԿ֊ը կգտնվի գծային **Triode** ռեժիմում հետևաբար՝

```{=tex}
\begin{equation} 
  V_{out}  = V_{DD} - R_{D} \frac{1}{2} μ_n C_{ox} \frac{W}{L} [2(V_{in} - V_{TH})V_{out} - V_{out}^2]
  (\#eq:2)
\end{equation}
```
ՈՒժեղարարների նափագծման ժամանակ պետք է համոզվել ու ՄՈԿ֊ը գտնվում է հագեցման ռեժիմում։ 
Քանի որ գծային ռեծիմում ըմբիչի հոսանքը կախած է նաև ըմբիչի լարումից $\pmb{V_{out}}$֊ից 
«ՄՕԿ֊ը հանդես է գալիս որպես ղեկավարվող դիմադրություն» ստացվում է ելքի արժեքը կախված է 
ելքից **«ոչ ցանկալի հետադարց կապ»**  ինչպես նաև կունենանք փոքր ուժեղացման գործակից։

Ուսումնասիրությունները սկսենք փոքր ազդանշան մոդելից։ Եթե  $V_{out}>V_{in} - V_{TH}$  կունենանք՝

```{=tex}
\begin{equation} 
  A_v = \frac{\partial V_{out}}{\partial V_{in}} = - R_{D}  μ_n C_{ox} \frac{W}{L} (V_{in} - V_{TH}) = -g_m R_D
  (\#eq:3)
\end{equation}
```
Պարզ մաթ․ ձևափոխությունների արձյունքում ստացվում եմ հետագայում օգտակար հետևյալ արտահայտությունը՝

```{=tex}
\begin{equation} 
  A_v = - \sqrt{2 μ_n C_{ox} \frac{W}{L} I_D} \frac{V_{RD}}{I_D} = - \sqrt{2 μ_n C_{ox} \frac{W}{L} \frac{1}{I_D}}V_{RD}
  (\#eq:4)
\end{equation}
```
որտեղ $V_{RD}$֊ը դիմադրության վրա ընկած լարման անկումն է։

(2.3) արտահայտության մեջ $g_m$֊ը ՄՕԿ֊ի փոխանցման գործակիցն է ըստ փոքր ազդանշան մոդելի 
ազդանշանը փոքր ամպլիտուդով փոփոխվում է $V_b$ հաստատուն լարման շուրջ։  $V_b$ շեղման 
«bias» լարումը ընտրում է ուժեղարարի աշխատանքային կետը։ Իրականում ազդանշանները 
հիմնականում փոքր ամպլիտուդով ժամանակից կախված մեծություններ են որոնց արժեքը չի 
գերազանցում շեմաին լարումը և անպայման պետք է ավելացնել շեղման լարում։ Այդպիսի ազդանշանի 
օրինակ է բարձրախոսից ստացված ազդանշանը որի թվային արժեքը մվ֊է։ $V_b$ աշխատանքային կետում 
ՄՕԿ֊ի փոխանցման գործակիցը կլինի՝ $g_{mV_b} = μ_n C_{ox} \frac{W}{L} (V_b - V_{TH})$: 
Երբ մութքային ազդանշանը սկսի փոփոխվել զուգահեռ կփոփոխվի նաև ըմբիչով անցնող հոսանքը 
$\partial {I_{D}} = g_m \partial {V_{in}}$ իսկ ելքային լարումը կփոփոխվի $R_D$ անգամ ավել 
միայն երբ $I_D$ մեծանուն է $V_{out}$-ը փոքրանում է։

```{r, echo=FALSE, out.width='60%', fig.align='center', fig.cap='...'}
knitr::include_graphics("imige/csssm.png")
```

Իրականում $V_{in}$֊ի փոփոխությունը բերում է $g_m$֊ի փոփոխության և որքան մեծ է մուտքի 
փոփոխությունը այնքան ավելի զգալի է $g_m$֊ի փոփոխությունը որը բերում է անցանկալի  ոչ 
գծաին ձևափոխությունների և այստեղ էլ ինչպես միշտ հրաշքներ չէն լինում և անհրաժեշտ է գնալ 
փողզիջումների քանի որ լավարկելով մի պարամետրը անպայման պետք է տուժի միուսը։

Երբ $g_m$ բավական մեծ է լինում ելքի լարումը մեծ ամպլիտուդ է սկսում փոփոխել քանի որ $V_{out} = V_{DS}$ 
հոսքուղու մոդուլացիա էֆեքտը սկսում է զգալի դեր ունենալ ելքի վրա և կարիք է առաջանում ներառել 
մոդելում։

```{=tex}
\begin{equation} 
V_{out}= V_{DD} − R_{D}\frac{1}{2} μ_{n}C_{ox} \frac{W}{L}(V_{in} − V_{TH})^2 (1 + λV_{out})\\
(\#eq:4)
\end{equation}
```


```{=tex}
\begin{equation} 
\frac{\partial{V_{out}}}{\partial{V_{in}}} =  -R_{D} μ{n}C{ox} \frac{W}{L}(V_{in} − V_{TH})(1 + λV_{out})\\
 - R_{D}\frac{1}{2} μ{n}C{ox} \frac{W}{L}(V_{in} − V_{TH})^2 λ\frac{\partial{V_{out}}}{\partial{V_{in}}}
  (\#eq:5)
\end{equation}
```

հաշվի առնելով որ՝ $\frac{1}{r_o} = \frac{1}{2} μ{n}C{ox} \frac{W}{L}(V_{in} − V_{TH})^2 λ$ 
ուժեղացման գործակցի համար կունենանք՝

```{=tex}
\begin{equation} 
A_v = -g_m \frac{r_0 R_D}{r_0 + R_D} 
  (\#eq:6)
\end{equation}
```

```{r, echo=FALSE, out.width='60%', fig.align='center', fig.cap='...'}
knitr::include_graphics("imige/csssmcm.png")
```

Նկարում պատկերված է մոդելը որտեղից շատ անգամ ավելի հեշտ ստացվում է (2.6)֊ը։ 

```{=tex}
\begin{equation} 
\frac{V_{out}}{V_{in}} = -g_m R_D || r_0
  (\#eq:7)
\end{equation}
```


:::::: {.cols data-latex=""}

::: {.col data-latex="{0.7\textwidth}"}

```{r, echo=FALSE, out.width="600px", fig.align='center', fig.cap='...'}
knitr::include_graphics("imige/csic.png")
```
:::

::: {.col data-latex="{0.1\\textwidth}"}
  <!-- an empty Div (with a white space), serving as
a column separator -->
:::

::: {.col data-latex="{0.2\textwidth}"}
Որպիսի մեկ ՄՕԿ֊ով ստանանք առավելագույն ուժեղացման գործակից $R_D$-ը պետք է ունենա անվերջ 
մեծ արժեք։ Հնարաոր առավելագույն ուժեղացումը տեղի կունենա երբ ռեզիստորը փոխարինենք հոսանքի 
աղբյուրով։ Ուժեղացման այդ արժեքը կոչվում է սեփական։ 


:::
::::::

```{=tex}
\begin{equation} 
A_v = - g_m r_0
  (\#eq:8)
\end{equation}
```
Թվում է թէ առաջանում է հակասություն չէ որ հոսանքի աղբյուրի արժեքը կարող է չհամնկնել $I_D$ 
արժեքին չէ որ մենք ասում էնք ՄՕԿ֊ը նույնպես հոսանքի աղբյուր է սակայն երբ սկսում ենք հաշվի 
առնել հոսքուղու մոդուլացիաի էֆեքտը ամեն ինչ հարթվում է։

```{=tex}
\begin{equation} 
I_1 = \frac{1}{2} μ_{n}C_{ox} \frac{W}{L}(V_{in} − V_{TH})^2 (1 + λV_{out})
  (\#eq:9)
\end{equation}
```
Նախքան հաջորդ միացման անցնելը կազմենք «Spice» նկարագրությունը և կատարենք մաթեմատիկական 
մոդելաորում։ 

`XM1 out input GND GND nfet_01v8_lvt w=1 l=0.5` <br />
`Rd vdd out 'res'` <br />
`Vvdd vdd GND 2` <br />
`Vvin input GND 1.8` <br />

`dc Vvin 0 4 0.01 Rd 300 1500 300`

```{r  echo=FALSE, fig.cap='...', out.width='100%', fig.align='center'}
df <- read.csv('./sp_data/cs_dcAnalys.csv')
pal <- c("green", "blue4", "magenta", "red", "goldenrod", "darkorange", "purple4", "indianred","yellow","plum", "gray")
pal <- setNames(pal, unique(df$rez))
fig <- plot_ly()%>%
  add_trace(data = df , x = ~Vin, 
            y= ~Vout , color = ~rez,
            type ='scatter',  mode = 'lines', 
            orientation = 'h', text = ~ rez,
            hovertemplate = paste('<br><b>Rdr</b>:%{text}<br>', 
                                  '<i>Vout</i>: %{y}</br>', 
                                  '<i>Vin</i>: %{x}'), 
            colors = pal)%>%
            add_trace(x= ~c(0.5 ,2.3), y= ~c(0, 1.8),
             type ='scatter',  mode = 'lines',
             name = 'Vout = Vin - Vth')%>%
    layout( title = "Ելքի լարման կախումը մութքի լարումից։", legend=list(title=list(text='Rdr')),
          ##plot_bgcolor='#e5ecf6', 
          xaxis = list( 
            title = 'Մութքի լարումը։'
            #zerolinecolor = '#ffff', 
            #zerolinewidth = 2, 
            #gridcolor = 'ffff'
            ), 
          yaxis = list( 
            title = 'Ելքի լարումը։'
            #zerolinecolor = '#ffff', 
            #zerolinewidth = 2, 
            #gridcolor = 'ffff'),
          #bargap = 1
          ))
fig
```

```{r  echo=FALSE, fig.cap='...', out.width='100%', fig.align='center'}
df <- read.csv('./sp_data/cs_dcAnalys.csv')
pal <- c("green", "blue4", "magenta", "red", "goldenrod", "darkorange", "purple4", "indianred","yellow","plum")
pal <- setNames(pal, unique(df$rez))
fig <- plot_ly()%>%
  add_trace(data = df , x = ~Vin, 
            y= ~gain , color = ~rez,
            type ='scatter',  mode = 'lines', 
            orientation = 'h', text = ~ rez,
            hovertemplate = paste('<br><b>Rdr</b>:%{text}<br>', 
                                  '<i>Gain</i>: %{y}</br>', 
                                  '<i>Vin</i>: %{x}'), 
            colors = pal)%>%
    layout( title = "ՈՒժեղացման գործակցի կախումը մութքի լարումից։", legend=list(title=list(text='Rdr')),
          ##plot_bgcolor='#e5ecf6', 
          xaxis = list( 
            title = 'Մութքի լարումը։'
            #zerolinecolor = '#ffff', 
            #zerolinewidth = 2, 
            #gridcolor = 'ffff'
            ), 
          yaxis = list( 
            title = 'ՈՒժեղացման գործակից։'
            #zerolinecolor = '#ffff', 
            #zerolinewidth = 2, 
            #gridcolor = 'ffff'),
          #bargap = 1
          ))
fig
```

Նկ․ (2.5) և (2.6) «Spice» հետազոտության արդյունքների հիման վրա կազմված գրաֆիկներ են։ 
(2.5)֊ում կապույտ գիծը տրվում է $V_{out} = V_{in} - V_{TH}$ հավասարումով հետևաբար կորերի 
և գծի հատման կետերը դա մութքային լարման այն սահմանային արժեքն է որից մեծ լարման դեպքում 
ՄՕԿ֊ը սկսում է աշխատել գծաին ռեժիմում։ Աշխատանքային ռեժիմի փոփոխության կետը վառ 
արտահայտված է նկ․(2.6)֊ում երբ ուժեղացման գործակիցը սկսում է նվազել։ Ինչպես տեսնում ենք մեծ 
դիմադրությամբ ուժեղարարը ունի ավելի մեծ ուժեղացման գործակից սակայն արագագործությամբ զիջում է 
ավելի փոքր դիմադրությամբ ուժեղարարներին։ Քանի որ փոքր դիմադրությունը նշանակում է թույլ հոսանք 
իսք հոսանքը լիցկակիրների շարժման քանաքական բնութագիր է հետևաբար լիցքակիրներին շարժման 
մեջ դնելու համար կպահանջվի ավելի երկար ժամանակ։ 

```{r  echo=FALSE, fig.cap='...', out.width='100%', fig.align='center'}
df <- read.csv('./sp_data/cs_dcAnalys.csv')
pal <- c("green", "blue4", "magenta", "red", "goldenrod", "darkorange", "purple4", "indianred","yellow","plum", "gray")
pal <- setNames(pal, unique(df$rez))
fig <- plot_ly()%>%
  add_trace(data = df , x = ~Vin, 
            y= ~Vout , color = ~rez,
            type ='scatter',  mode = 'lines', 
            orientation = 'h', text = ~ rez,
            hovertemplate = paste('<br><b>Rdr</b>:%{text}<br>', 
                                  '<i>Vout</i>: %{y}</br>', 
                                  '<i>Vin</i>: %{x}'), 
            colors = pal)%>%
            add_trace(x= ~c(0.5 ,2.3), y= ~c(0, 1.8),
             type ='scatter',  mode = 'lines',
             name = 'Vout = Vin - Vth')%>%
    layout( title = "Ելքի լարման կախումը մութքի լարումից։", legend=list(title=list(text='Rdr')),
          ##plot_bgcolor='#e5ecf6', 
          xaxis = list( 
            title = 'Մութքի լարումը։'
            #zerolinecolor = '#ffff', 
            #zerolinewidth = 2, 
            #gridcolor = 'ffff'
            ), 
          yaxis = list( 
            title = 'Ելքի լարումը։'
            #zerolinecolor = '#ffff', 
            #zerolinewidth = 2, 
            #gridcolor = 'ffff'),
          #bargap = 1
          ))
fig
```

```{r  echo=FALSE, fig.cap='...', out.width='100%', fig.align='center'}
df <- read.csv('./sp_data/csidxs.csv')
pal <- c("green", "blue4", "magenta", "red", "goldenrod", "darkorange", "purple4", "indianred","yellow","plum")
pal <- setNames(pal, unique(df$rez))
fig <- plot_ly()%>%
  add_trace(data = df , x = ~Vin, 
            y= ~gain , color = ~rez,
            type ='scatter',  mode = 'lines', 
            orientation = 'h', text = ~ rez,
            hovertemplate = paste('<br><b>Rdr</b>:%{text}<br>', 
                                  '<i>Gain</i>: %{y}</br>', 
                                  '<i>Vin</i>: %{x}'), 
            colors = pal)%>%
    layout( title = "ՈՒժեղացման գործակցի կախումը մութքի լարումից։", legend=list(title=list(text='Rdr')),
          ##plot_bgcolor='#e5ecf6', 
          xaxis = list( 
            title = 'Մութքի լարումը։'
            #zerolinecolor = '#ffff', 
            #zerolinewidth = 2, 
            #gridcolor = 'ffff'
            ), 
          yaxis = list( 
            title = 'ՈՒժեղացման գործակից։'
            #zerolinecolor = '#ffff', 
            #zerolinewidth = 2, 
            #gridcolor = 'ffff'),
          #bargap = 1
          ))
fig
```



### Ընդհանուր ակունքով ուժեղարար միացված դիոդով։
